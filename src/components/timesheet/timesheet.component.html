
<div class="container mx-auto pb-12">
  <div class="flex flex-col md:flex-row justify-between md:items-center mb-8 gap-4">
    <div>
      <h1 class="text-3xl font-light tracking-tight">{{ translationService.translate(viewMode() === 'log' ? 'Log Time' : 'Logging History') }}</h1>
      <p class="opacity-60 mt-1 text-sm font-medium">
          @if(viewMode() === 'log') {
            {{ translationService.translate('Track work hours across projects and clients.') }}
          } @else {
            {{ translationService.translate('View and filter past work entries.') }}
          }
      </p>
    </div>
  </div>

  <!-- SECTION 1: LOG TIME (Calendar & Insights) -->
  @if(viewMode() === 'log') {
  <div class="mb-12">
    <!-- Component A: Calendar -->
    <div class="card bg-base-100 shadow-sm border border-base-200 mb-8">
      <div class="card-body p-6">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row justify-between items-center mb-6 pb-4 border-b border-base-200 gap-4">
          <!-- View Switcher -->
          <div role="tablist" class="tabs tabs-boxed bg-base-100 border border-base-200 p-1">
            <a role="tab" class="tab tab-sm" [class.tab-active]="calendarViewMode() === 'week'" (click)="calendarViewMode.set('week')">{{ translationService.translate('Week') }}</a>
            <a role="tab" class="tab tab-sm" [class.tab-active]="calendarViewMode() === 'month'" (click)="calendarViewMode.set('month')">{{ translationService.translate('Month') }}</a>
          </div>

          <div class="flex items-center gap-4">
            <button (click)="changePeriod(-1)" class="btn btn-ghost btn-circle btn-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
            </button>
            <h2 class="text-lg font-medium text-center min-w-[180px]">
                @if(calendarViewMode() === 'week') {
                <span>{{ currentWeekDays()[0].date | date:'MMM d' }} - {{ currentWeekDays()[6].date | date:'MMM d, yyyy' }}</span>
                } @else {
                <span>{{ currentDate() | date:'MMMM yyyy' }}</span>
                }
            </h2>
            <button (click)="changePeriod(1)" class="btn btn-ghost btn-circle btn-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
            </button>
          </div>
        </div>
        
        <!-- Week View -->
        @if(calendarViewMode() === 'week') {
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-4">
            @for(day of currentWeekDays(); track day.name){
              @let summary = getDailySummary(day.date);
              <div (click)="openEntryModal(day.date)" 
                  class="border border-base-200 rounded-lg p-3 text-center cursor-pointer hover:border-base-300 transition-all min-h-[120px] flex flex-col items-center justify-start relative group bg-base-100">
                <div class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity text-base-content hover:scale-110" (click)="openEntryModal(day.date, 'add'); $event.stopPropagation()">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 opacity-50 hover:opacity-100" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" /></svg>
                </div>
                <p class="font-bold text-[10px] uppercase tracking-wider opacity-40 mb-1">{{ day.name }}</p>
                <p class="text-xl font-light">{{ day.date.getDate() }}</p>
                
                @if(summary.totalHours > 0){
                  <div class="mt-auto mb-1">
                      <p class="text-lg font-bold">{{ summary.totalHours | number:'1.0-1' }}h</p>
                      <p class="text-[10px] opacity-40">{{ summary.entries.length }} items</p>
                  </div>
                } @else {
                  <p class="text-base-content/20 mt-auto mb-2">-</p>
                }
              </div>
            }
          </div>
        }

        <!-- Month View -->
        @if(calendarViewMode() === 'month') {
          <div class="grid grid-cols-7 border border-base-200 rounded-lg overflow-hidden bg-base-100">
              @for(dayName of ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']; track dayName){
                <div class="text-center font-bold text-[10px] py-2 bg-base-50 border-b border-base-200 uppercase tracking-wide opacity-50">{{ dayName }}</div>
              }
              @for(day of currentMonthDays(); track day.date; let i = $index){
                @let summary = getDailySummary(day.date);
                <div (click)="openEntryModal(day.date)" 
                      class="p-2 min-h-[100px] cursor-pointer hover:bg-base-50 transition-colors border-r border-b border-base-200 relative group"
                      [class.opacity-30]="!day.isCurrentMonth"
                      [class.bg-base-50]="!day.isCurrentMonth"
                      [class.border-r-0]="(i + 1) % 7 === 0">
                    
                    <div class="flex justify-between items-start">
                      <span class="opacity-0 group-hover:opacity-100 text-[10px] font-bold hover:underline" (click)="openEntryModal(day.date, 'add'); $event.stopPropagation()">+ Log</span>
                      <p class="font-medium text-xs">{{ day.date.getDate() }}</p>
                    </div>

                    @if(summary.totalHours > 0){
                        <div class="mt-2 flex flex-col gap-1">
                            <div class="p-1 rounded bg-base-200 text-center">
                                <p class="text-xs font-bold">{{ summary.totalHours | number:'1.0-1' }}h</p>
                            </div>
                        </div>
                    }
                </div>
              }
          </div>
        }
      </div>
    </div>

    <!-- Component B: Insights -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        
        <!-- Activity Heatmap -->
        <div class="card bg-base-100 shadow-sm border border-base-200 lg:col-span-2">
            <div class="card-body p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-xs uppercase tracking-wider opacity-50">{{ translationService.translate('Activity Mosaic') }}</h3>
                    <!-- Freelancer Filter -->
                    <select [ngModel]="mosaicMemberFilter()" (ngModelChange)="mosaicMemberFilter.set($any($event))" class="select select-bordered select-xs bg-base-100 max-w-[150px]">
                        <option [ngValue]="null">{{ translationService.translate('All Freelancers') }}</option>
                        @for(member of members(); track member.id){
                            <option [ngValue]="member.id">{{ member.name }}</option>
                        }
                    </select>
                </div>
                
                <!-- Mosaic Grid -->
                <div class="grid grid-cols-7 gap-2">
                    <!-- Day Labels -->
                    @for(day of ['M','T','W','T','F','S','S']; track day) {
                        <div class="text-center text-[10px] opacity-40 font-bold mb-1">{{ day }}</div>
                    }
                    
                    <!-- Cells -->
                    @for(data of periodSummary().heatmap; track data.date.toISOString()) {
                        <div class="aspect-square rounded-sm relative group cursor-help transition-colors duration-200 border border-transparent"
                            [class]="getHeatmapColor(data.intensity)">
                            
                            <!-- Tooltip -->
                            <div class="absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-neutral text-neutral-content text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-20 shadow-lg font-mono">
                                <div class="font-bold">{{ data.date | date:'mediumDate' }}</div>
                                <div>{{ data.hours | number:'1.1-1' }} hrs</div>
                            </div>
                        </div>
                    }
                </div>
                
                <!-- Legend -->
                <div class="flex justify-end items-center gap-2 mt-4 text-[10px] opacity-50 uppercase font-bold tracking-wide">
                    <span>{{ translationService.translate('Less') }}</span>
                    <div class="w-3 h-3 bg-base-200 rounded-sm"></div>
                    <div class="w-3 h-3 bg-primary/20 rounded-sm"></div>
                    <div class="w-3 h-3 bg-primary/60 rounded-sm"></div>
                    <div class="w-3 h-3 bg-primary rounded-sm"></div>
                    <span>{{ translationService.translate('More') }}</span>
                </div>
            </div>
        </div>

        <!-- User Breakdown Table -->
        <div class="card bg-base-100 shadow-sm border border-base-200 lg:col-span-1">
            <div class="card-body p-0">
                <div class="p-5 border-b border-base-200">
                    <h3 class="font-bold text-xs uppercase tracking-wider opacity-50 mb-3">{{ translationService.translate('Period Summary') }}</h3>
                    <div class="flex flex-col gap-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm opacity-70">{{ translationService.translate('Total Hours') }}</span>
                            <span class="font-mono font-bold">{{ periodSummary().totalHours | number:'1.1-1' }}h</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm opacity-70">{{ translationService.translate('Total Billable') }}</span>
                            <span class="font-mono font-bold text-success">{{ periodSummary().totalEarnings | currency }}</span>
                        </div>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="table table-xs">
                        <thead class="bg-base-50/50 uppercase opacity-60">
                            <tr>
                                <th class="pl-5">{{ translationService.translate('Member') }}</th>
                                <th class="text-center">{{ translationService.translate('Hours') }}</th>
                                <th class="text-right pr-5">{{ translationService.translate('Total') }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for(stat of paginatedUserStats(); track stat.memberId) {
                                <tr class="hover:bg-base-50">
                                    <td class="pl-5">
                                        <div class="flex items-center gap-2">
                                            <div class="avatar"><div class="w-5 rounded-full"><img [src]="stat.avatarUrl"></div></div>
                                            <span class="font-medium text-xs truncate max-w-[80px]">{{ stat.name }}</span>
                                        </div>
                                    </td>
                                    <td class="text-center font-mono">{{ stat.totalHours | number:'1.1-1' }}</td>
                                    <td class="text-right font-mono font-medium opacity-80 pr-5">${{ stat.totalEarnings | number:'1.0-0' }}</td>
                                </tr>
                            } @empty {
                                <tr><td colspan="3" class="text-center py-8 opacity-50 text-xs italic">No hours logged.</td></tr>
                            }
                        </tbody>
                    </table>
                </div>
                
                @if(periodSummary().userStats.length > insightsPerPage()) {
                    <div class="p-2 border-t border-base-200 flex justify-center">
                        <app-pagination 
                            [currentPage]="insightsPage()"
                            [totalItems]="periodSummary().userStats.length"
                            [itemsPerPage]="insightsPerPage()"
                            (pageChange)="onInsightsPageChange($event)">
                        </app-pagination>
                    </div>
                }
            </div>
        </div>
    </div>
  </div>
  }

  <!-- SECTION 2: LOGGING HISTORY CARD -->
  @if(viewMode() === 'history') {
  <div>
    <div class="card bg-base-100 shadow-sm border border-base-200 rounded-lg overflow-hidden">
        <div class="card-body p-0">
            <!-- Filter Bar -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3 p-4 border-b border-base-200 bg-base-50/30 items-end">
                <div class="form-control">
                    <label class="label py-1"><span class="label-text text-xs opacity-60 uppercase">{{ translationService.translate('Client') }}</span></label>
                    <select [ngModel]="historyClientId()" (ngModelChange)="historyClientId.set($any($event)); historyProjectId.set(null); historyPage.set(1)" class="select select-bordered select-sm w-full bg-base-100">
                        <option [ngValue]="null">{{ translationService.translate('All Clients') }}</option>
                        @for(client of clients(); track client.id){
                            <option [ngValue]="client.id">{{ client.name }}</option>
                        }
                    </select>
                </div>
                <div class="form-control">
                    <label class="label py-1"><span class="label-text text-xs opacity-60 uppercase">{{ translationService.translate('Project') }}</span></label>
                    <select [ngModel]="historyProjectId()" (ngModelChange)="historyProjectId.set($any($event)); historyPage.set(1)" class="select select-bordered select-sm w-full bg-base-100" [disabled]="!historyClientId()">
                        <option [ngValue]="null">{{ translationService.translate('All Projects') }}</option>
                        @for(project of projectsForHistory(); track project.id){
                            <option [ngValue]="project.id">{{ project.name }}</option>
                        }
                    </select>
                </div>
                <div class="form-control">
                    <label class="label py-1"><span class="label-text text-xs opacity-60 uppercase">{{ translationService.translate('Freelancer') }}</span></label>
                    <select [ngModel]="historyMemberId()" (ngModelChange)="historyMemberId.set($any($event)); historyPage.set(1)" class="select select-bordered select-sm w-full bg-base-100">
                        <option [ngValue]="null">{{ translationService.translate('All Freelancers') }}</option>
                        @for(member of members(); track member.id){
                            <option [ngValue]="member.id">{{ member.name }}</option>
                        }
                    </select>
                </div>
                <div class="form-control">
                    <label class="label py-1"><span class="label-text text-xs opacity-60 uppercase">{{ translationService.translate('Start Date') }}</span></label>
                    <input type="date" [ngModel]="historyStartDate()" (ngModelChange)="historyStartDate.set($event); historyPage.set(1)" class="input input-bordered input-sm w-full bg-base-100">
                </div>
                <div class="form-control">
                    <label class="label py-1"><span class="label-text text-xs opacity-60 uppercase">{{ translationService.translate('End Date') }}</span></label>
                    <input type="date" [ngModel]="historyEndDate()" (ngModelChange)="historyEndDate.set($event); historyPage.set(1)" class="input input-bordered input-sm w-full bg-base-100">
                </div>
            </div>

            <!-- Table -->
            <div>
                <table class="table w-full">
                    <thead class="bg-base-50/50 text-xs uppercase opacity-60">
                        <tr>
                            <th class="pl-6">{{ translationService.translate('Date') }}</th>
                            <th>{{ translationService.translate('Freelancer') }}</th>
                            <th>{{ translationService.translate('Project') }} / {{ translationService.translate('Client') }}</th>
                            <th>{{ translationService.translate('Description') }}</th>
                            <th class="text-center">{{ translationService.translate('Hours') }}</th>
                            <th class="text-right">{{ translationService.translate('Rate') }}</th>
                            <th class="text-right">{{ translationService.translate('Amount') }}</th>
                            <th class="text-right pr-6">{{ translationService.translate('Actions') }}</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for(entry of paginatedHistory(); track entry.id) {
                            <tr class="hover:bg-base-50 group">
                                <td class="pl-6 text-sm font-medium font-mono opacity-70">{{ entry.date | date:'mediumDate' }}</td>
                                <td>
                                    <div class="flex items-center gap-2">
                                        <div class="avatar"><div class="w-6 rounded-full"><img [src]="entry.memberAvatarUrl"></div></div>
                                        <span class="text-sm font-medium">{{ entry.memberName }}</span>
                                    </div>
                                </td>
                                <td>
                                    <div class="text-sm font-bold">{{ entry.projectName }}</div>
                                    <div class="text-[10px] opacity-50 uppercase tracking-wide">{{ entry.clientName }}</div>
                                </td>
                                <td class="text-sm max-w-xs truncate opacity-70" [title]="entry.description">{{ entry.description }}</td>
                                <td class="text-center font-mono font-bold">{{ entry.hours }}</td>
                                <td class="text-right font-mono text-xs opacity-70">{{ entry.rate | currency }}/hr</td>
                                <td class="text-right font-mono font-medium">{{ entry.amount | currency }}</td>
                                <td class="text-right pr-6">
                                    <div class="dropdown dropdown-end">
                                        <button tabindex="0" class="btn btn-ghost btn-xs btn-circle">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" /></svg>
                                        </button>
                                        <ul tabindex="0" class="dropdown-content menu p-2 shadow-lg bg-base-100 rounded-lg w-32 z-50 border border-base-200">
                                            <li><a (click)="deleteEntry(entry.projectId, entry.weekId, entry.dayName)" class="text-error text-xs">{{ translationService.translate('Delete') }}</a></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                        } @empty {
                            <tr><td colspan="8" class="text-center py-12 opacity-50 italic text-sm">No history entries found.</td></tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            @if(filteredHistory().length > historyPerPage()) {
                <div class="p-4 flex justify-center border-t border-base-200">
                    <app-pagination 
                        [currentPage]="historyPage()" 
                        [totalItems]="filteredHistory().length" 
                        [itemsPerPage]="historyPerPage()" 
                        (pageChange)="onHistoryPageChange($event)">
                    </app-pagination>
                </div>
            }
        </div>
    </div>
  </div>
  }
</div>

<!-- Time Entry Modal -->
@if(isEntryModalOpen() && entryModalDate(); as date){
  <div class="modal modal-open" role="dialog" (click)="closeEntryModal()">
    <div class="modal-box w-11/12 max-w-3xl shadow-2xl border border-base-200 rounded-xl" (click)="$event.stopPropagation()">
      <button (click)="closeEntryModal()" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
      
      <!-- MODE: LIST VIEW -->
      @if(entryModalMode() === 'list') {
          <div class="flex justify-between items-center mb-6 border-b border-base-200 pb-4">
              <div>
                  <h3 class="font-bold text-lg">{{ date | date:'fullDate' }}</h3>
                  <p class="opacity-60 text-xs">Daily Log Summary</p>
              </div>
          </div>

          @if(modalEntries().length > 0) {
              <div class="overflow-x-auto">
                  <table class="table table-sm w-full">
                      <thead class="bg-base-50/50 uppercase text-[10px] opacity-60">
                          <tr>
                              <th>{{ translationService.translate('Member') }}</th>
                              <th>{{ translationService.translate('Project') }}</th>
                              <th>{{ translationService.translate('Description') }}</th>
                              <th class="text-right">{{ translationService.translate('Hours') }}</th>
                              <th class="text-right">{{ translationService.translate('Actions') }}</th>
                          </tr>
                      </thead>
                      <tbody>
                          @for(entry of modalEntries(); track $index) {
                              <tr class="hover:bg-base-50">
                                  <td>
                                      <div class="flex items-center gap-2">
                                          <div class="avatar"><div class="w-6 rounded-full"><img [src]="entry.memberAvatarUrl"></div></div>
                                          <span class="font-bold text-xs">{{ entry.memberName }}</span>
                                      </div>
                                  </td>
                                  <td>
                                      <div class="font-medium text-xs">{{ entry.projectName }}</div>
                                  </td>
                                  <td class="text-xs opacity-70 max-w-[150px] truncate" [title]="entry.description">{{ entry.description }}</td>
                                  <td class="text-right font-mono font-bold">{{ entry.hours }}h</td>
                                  <td class="text-right">
                                      <div class="flex justify-end gap-1">
                                          <button class="btn btn-ghost btn-xs btn-square" (click)="editEntry(entry)" title="Edit">
                                              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /></svg>
                                          </button>
                                          <button class="btn btn-ghost btn-xs btn-square text-error" (click)="deleteEntry(entry.projectId)" title="Delete">
                                              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                                          </button>
                                      </div>
                                  </td>
                              </tr>
                          }
                      </tbody>
                  </table>
              </div>
          } @else {
              <div class="text-center py-10 opacity-40 bg-base-50 rounded-lg text-sm italic">
                  <p>No time logged for this day.</p>
              </div>
          }
      }

      <!-- MODE: ADD / EDIT FORM -->
      @if(entryModalMode() === 'add' || entryModalMode() === 'edit') {
          <div class="flex items-center gap-3 mb-6 border-b border-base-200 pb-4">
              <button class="btn btn-circle btn-ghost btn-sm" (click)="entryModalMode.set('list')">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
              </button>
              <div>
                  <h3 class="font-bold text-lg">{{ translationService.translate(entryModalMode() === 'edit' ? 'Edit Entry' : 'Log Time') }}</h3>
                  <p class="opacity-60 text-xs">{{ date | date:'mediumDate' }}</p>
              </div>
          </div>

          <form (ngSubmit)="saveTimeEntry()" class="space-y-4">
              <div class="form-control">
                 <label class="label"><span class="label-text font-medium">{{ translationService.translate('Freelancer') }}</span></label>
                 <select [ngModel]="modalMemberId()" (ngModelChange)="modalMemberId.set(+$event)" name="member" class="select select-bordered w-full" [disabled]="!isAdmin()" required>
                    <option [ngValue]="null" disabled>{{ translationService.translate('Choose...') }}</option>
                    @for(member of members(); track member.id){
                      <option [value]="member.id">{{ member.name }}</option>
                    }
                 </select>
              </div>
              
              <div class="form-control">
                <label class="label"><span class="label-text font-medium">{{ translationService.translate('Client') }}</span></label>
                <select [ngModel]="modalClientId()" (ngModelChange)="modalClientId.set(+$event); modalProjectId.set(null)" name="client" class="select select-bordered w-full" required>
                   <option [ngValue]="null" disabled>{{ translationService.translate('Choose...') }}</option>
                   @for(client of clients(); track client.id){
                     <option [value]="client.id">{{ client.name }}</option>
                   }
                </select>
              </div>

              <div class="form-control">
                <label class="label"><span class="label-text font-medium">{{ translationService.translate('Project') }}</span></label>
                <select [ngModel]="modalProjectId()" (ngModelChange)="modalProjectId.set(+$event)" name="project" class="select select-bordered w-full" [disabled]="!modalClientId()" required>
                   <option [ngValue]="null" disabled>{{ translationService.translate('Choose...') }}</option>
                   @for(project of modalAvailableProjects(); track project.id){
                     <option [value]="project.id">{{ project.name }}</option>
                   }
                </select>
              </div>

              <div class="grid grid-cols-3 gap-4">
                  <div class="form-control col-span-1">
                    <label class="label"><span class="label-text font-medium">{{ translationService.translate('Hours') }}</span></label>
                    <input type="number" [ngModel]="entryHours()" (ngModelChange)="entryHours.set($event)" name="hours" required min="0.25" max="24" step="0.25" class="input input-bordered">
                  </div>
              </div>

              <div class="form-control">
                <label class="label"><span class="label-text font-medium">{{ translationService.translate('Description') }}</span></label>
                <textarea [ngModel]="entryDescription()" (ngModelChange)="entryDescription.set($event)" name="description" rows="3" class="textarea textarea-bordered h-20 resize-none" placeholder="What did you work on?"></textarea>
              </div>

              <div class="modal-action pt-4">
                <button type="button" (click)="entryModalMode.set('list')" class="btn btn-ghost">{{ translationService.translate('Cancel') }}</button>
                <button type="submit" class="btn btn-neutral px-6" [disabled]="!modalMemberId() || !modalProjectId() || entryHours() <= 0">{{ translationService.translate(entryModalMode() === 'edit' ? 'Update Entry' : 'Save Entry') }}</button>
              </div>
          </form>
      }
    </div>
  </div>
}
