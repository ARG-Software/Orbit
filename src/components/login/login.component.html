
<div class="flex items-center justify-center min-h-screen p-4 bg-base-200">
	<div class="card w-full max-w-md bg-base-100 shadow-2xl border border-base-200">
		<div class="card-body p-8">
      
      <!-- Brand Logo -->
      <div class="flex flex-col items-center justify-center mb-6">
         <div class="w-24 h-24 flex items-center justify-center rounded-[2rem] bg-gradient-to-tr from-violet-500 to-fuchsia-500 shadow-2xl shadow-violet-500/20 text-white mb-6">
            <!-- Badge Logo -->
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-14 h-14">
              <path d="M12 21a9 9 0 1 0-9-9c0 1.48.36 2.88.99 4.12" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" class="opacity-90"/>
              <circle cx="12" cy="12" r="3.5" class="fill-white"/>
              <circle cx="20.4" cy="8.6" r="2.5" class="fill-secondary stroke-none"/>
            </svg>
         </div>
         <h2 class="text-4xl font-bold text-center tracking-tight">Orbit</h2>
         <p class="text-center opacity-60 mt-1">The center of your freelance universe</p>
      </div>
			
      @if(errorMessage()){
        <div class="alert alert-error text-sm shadow-sm mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-5 w-5" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
          <span>{{ errorMessage() }}</span>
        </div>
      }

      @if(successMessage()){
        <div class="alert alert-success text-sm shadow-sm mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-5 w-5" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
          <span>{{ successMessage() }}</span>
        </div>
      }

      @if(!showForgotPassword()) {
        <!-- LOGIN FORM -->
        <form class="flex flex-col gap-5" (ngSubmit)="login(loginForm)" #loginForm="ngForm">
            <div class="form-control">
              <label class="label font-medium" for="email-address">Email address</label>
              <input id="email-address" name="email" type="email" autocomplete="email" required class="input input-bordered focus:input-primary" placeholder="you@example.com" ngModel>
            </div>

            <div class="form-control">
              <label class="label font-medium" for="password">Password</label>
              <input id="password" name="password" type="password" autocomplete="current-password" required class="input input-bordered focus:input-primary" placeholder="••••••••" ngModel>
              <label class="label">
                 <a (click)="toggleForgotPassword()" class="label-text-alt link link-primary no-underline hover:underline cursor-pointer">Forgot password?</a>
              </label>
            </div>
          
            <div class="form-control mt-2">
              <button type="submit" class="btn btn-primary w-full shadow-lg shadow-primary/20" [disabled]="loginForm.invalid || isSubmitting()">
                @if(isSubmitting()){ <span class="loading loading-spinner loading-sm"></span> }
                Sign in
              </button>
            </div>
        </form>

        <div class="divider text-xs opacity-50 uppercase my-6">Or continue with</div>

        <div class="form-control">
            <button type="button" (click)="loginWithGoogle()" class="btn btn-outline w-full hover:bg-base-200 hover:text-base-content hover:border-base-content/20" [disabled]="isSubmitting()">
              <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"/><path fill="#FF3D00" d="M6.306 14.691c-1.229 2.193-1.996 4.71-1.996 7.309s.767 5.116 1.996 7.309l-5.657 5.657C.252 32.344 0 28.32 0 24s.252-8.344 1.649-11.961l5.657 2.652z"/><path fill="#4CAF50" d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-5.657-5.657C30.01 34.693 27.215 36 24 36c-5.223 0-9.657-3.343-11.303-7.918l-5.657 5.657C9.343 39.998 16.023 44 24 44z"/><path fill="#1976D2" d="M43.611 20.083L48 20v-.242C48 8.864 40.592.833 32.045 0l-5.657 5.657C28.438 5.154 30.697 5 33 5c5.334 0 9.883 3.772 11.244 8.792l-5.633 6.291z"/></svg>
              Sign in with Google
            </button>
        </div>

        <div class="text-sm text-center mt-6 opacity-80">
            <p>Don't have an account? <a routerLink="/register" class="link link-primary font-medium">Sign up</a></p>
        </div>
      } @else {
        <!-- FORGOT PASSWORD FORM -->
        <div class="mb-4">
           <h3 class="text-xl font-bold">Recover Password</h3>
           <p class="opacity-60 text-sm mt-1">Enter your email address and we'll send you a link to reset your password.</p>
        </div>

        <form class="flex flex-col gap-5" (ngSubmit)="requestPasswordReset(resetForm)" #resetForm="ngForm">
            <div class="form-control">
              <label class="label font-medium" for="reset-email">Email address</label>
              <input id="reset-email" name="resetEmail" type="email" autocomplete="email" required class="input input-bordered focus:input-primary" placeholder="you@example.com" ngModel>
            </div>

            <div class="form-control mt-2">
              <button type="submit" class="btn btn-primary w-full" [disabled]="resetForm.invalid || isSubmitting()">
                @if(isSubmitting()){ <span class="loading loading-spinner loading-sm"></span> }
                Send Reset Link
              </button>
            </div>
        </form>
        
        <div class="text-center mt-6">
           <button class="btn btn-ghost btn-sm text-xs" (click)="toggleForgotPassword()">
              Back to Sign In
           </button>
        </div>
      }
		</div>
	</div>
</div>
